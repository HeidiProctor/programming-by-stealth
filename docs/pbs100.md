# PBS 100 of X â€” Time Sharing Challenge Solution

At the end of [instalment 96](https://bartificer.net/pbs96) I set a challenge with the intention that it be a long-running thing that people get to put a lot of time and energy into. The idea was to build a real web app that solved a real problem â€” specifically:

> Two podcasters live in different parts of the world, they need to communicate show recording times without the need to do mental arithmetic. Provide a web app that can share a specific time across timezones. The time being communicated should be embedded in the URL somehow so it doesnâ€™t need to be typed in by the recipient.

All details were intentionally left open. You could design any UI you liked, use any libraries you liked, and code using any paradigm you liked.

Because this challenge was so open, I hoped Allison would design something dramatically different to what I came up with, and my hopes were fulfilled! So, because our two solutions are so different, we'll divide this instalment between the two.

The intention here is not to go through our solutions in detail, the code is available for you to peruse at your leisure, but instead, to discus our designs, how we went about solving the problem, and any important points of learning.

In my solution I'll be focusing on two new concepts â€” URL manipulation, and cookies. In this case I used both in a purely client-side application, but these technologies are much more commonly used in client-server applications, so we'll be circling back to both in great detail in future instalments. This is just a teaser with a purely JavaScript flavour if you will ðŸ™‚

ALLISON SUMMARY HERE

AUDIO PLAYER HERE

## Bart's Solution

As you could probably guess from the wording of the challenge, I set this as a challenge because I wanted to solve this problem for myself, and, because I thought it just might be something of use to the wider world. To that end I approached this as a development project for a real-world web app.

My solution is live on the web as a free service anyone can use at [this-ti.me](https://this-ti.me/).

### Bart's Design

I thought of the problem as a game of two halves â€“ you need a UI for generating the links to share a time, and a UI for showing recipients the time that was shared with them. I chose to break those two tasks into two separate tabbed panes. My thinking was that it's very rare for someone to want to do both of these things at the same time. You will be arriving at the site with a single goal, to send of receive, so you shouldn't be overloaded with a second UI that's of no interest to you in that moment.

When a user arrives at the bare URL, i.e. there is no shared time encoded in the URL, the sharing tab is active, and the shared tab simply does not exist.

When a user arrives via a share link the shared tab both exists, and, is automatically selected. The tab for sharing a time is there, so those users can choose to share a time if they'd like, but in most situations, they'll just note the time, and move on with their lives.

There is one relatively common situation where someone is likely to want to receive and send â€” when they want to suggest an alternative time. To that end, I added a little intelligence to the default date and time pickers in the sharing tab. If you arrive at the bare URL the default date is today, and the default time is the next hour. That's a reasonable starting point for the date picker which will show the current month, and the time picker which has arrows for nudging the time up and down. However, if you arrive via a shared link, the share tab will default to the originally shared time shown in your timezone. This makes it easy to nudge the time forward or back by a few days or hours, and then hit the button to generate a new share link to send back!

Whether you are sending or receiving, it's vital the UI is showing you times in your timezone, so, the information about you is always needed, and should always be in view. While I wanted the user to always see their timezone, I didn't want them to have to change it any more than necessary. To that end I default the timezone to the locale provided by the browser. Most browsers ask the OS for their locale, and most people's OSes are configured correctly so users see the right time in the menubar/system tray, so most of the time that will work fine. People who travel a lot may find themselves needing to change the setting more often though.

To make shared links friendlier I also chose to let users enter their name into the *About You* card.

Once I chose to let people enter their name it seemed like hassle to make people re-enter it each time they visit the site. To that end I wanted to provide a mechanism for saving the name and timezone without building a server back-end with account management and all that. Since the site already uses URLs to encode data, I chose to allow people to generate a personal URL. This would encode their data, not a shared time, and arriving at the site from such a URL would default to the sharing page, not the shared page, and would pre-fill the *About You* tab from the data embedded in the URL. The idea is that users would bookmark their custom URL rather than the bare URL.

While custom URLs are a solution, they involved users bookmarking or otherwise saving a link, and lots of people don't do that anymore! So, I chose to also allow the data to be saved into a browser cookie. A cookie is simply a piece of data attached to a site that the browser remembers and makes available next time you browse to that same site.

I was reminded of two important lessons building the UI for the *About You* card:

1. **Placement matters** â€” I first had it on the left, and because we westerners read left to right, that made it appear more important than the shared time â€” do'h!
2. **Advanced features can be distractions** â€” while the saving functionality will be very useful to those who want it (like me), the fact that it has a button for generating a shared link makes it inherently confusing. Which link should I share? Why are there two similar buttons?

Inspired by Allison I chose to use [Bootstrap's Collapse plugin](https://getbootstrap.com/docs/4.5/components/collapse/) to hide the save UI by default, and have it expand and collapse via a *Save* button.

### Embedding Data in the URL

CORE JS FUNCTIONALITY

SECURITY - ENCODING & VALIDATION

URI.js

### Using Cookies

CORE JS FUNCTIONALITY

JS-COOKIE

### Classes Nowhere & Everywhere!

I did not write a single class of my own for this web app. I simply adore object oriented programming, so it's not like I was trying to avoid writing classes. So why didn't I? Simple â€” other people had already written excellent classes to model all the data I needed to manipulate for this challenge, so why spend my time poorly re-inventing the proverbial wheel?

These are the most significant classes I imported:

* [moment.js](https://momentjs.com) and it's [timezone extension](https://momentjs.com/timezone/) for processing times and timezones.
* [URI.js](https://medialize.github.io/URI.js/) for processing and manipulating URLs
* [js-cookie](https://github.com/js-cookie/js-cookie) for processing browser cookies.

And while they might be fading into the background of our thoughts now, don't forget that APIs like [jQuery](https://jquery.com) and [Mustache](https://github.com/janl/mustache.js/) are also object-oriented under the hood, even if they don't always make that obvious. The same is true of my open-source array-joiner [humanJoin.js](https://github.com/bbusschots/human-join) which I also used in my solution.

> One reason these OO solutions are not so obviously OO is that they make use of so-called *factory methods* rather than constructors. When you create a time object with moment.js you don't use the `new` keyword, instead, you call the `moment()` function. That function returns an object that is an instance of a class encapsulated within the moment.js code. The object was created by a constructor, but that was done on your behalf by the `moment()` function. jQuery's `$()` function behaves in the same way.
{: .aside :}

## Allison's Solution

## Final Thoughts