<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8" />
				
	<!-- Include Bootstrap 4 CSS -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	
	<!-- Include Font Awesome 5 -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	
	<title>PBS 87a â€” JavaScript Function Playground</title>
</head>
<body>

<!-- The Page header (a Jumbotron) -->
<header class="container mt-5">
	<div class="jumbotron">
		<h1 class="display-4">PBS 87a <small class="text-muted">JavaScript Function Playground</small></h1>

		<p class="lead">A page to execute the examples from instalment 87 of the <a href="https://bartb.ie/pbs" target="_blank" rel="noopener">Programming by Stealth series</a>.</p>
	</div>
</header>

<!-- The main page body -->
<main class="container">
	<section class="row">
		<div class="col">
			<p>This page is intended to be interacted with via the JavaScript console.</p>
			
			<p class="font-weight-bold">Note that you'll need to refresh the page between examples to remove any declared variables.</p>
		</div>
	</section>
	<div class="row">
		<section class="col-12 col-md-6 col-lg-8">
			<h1>Iterator Demo</h1>
				
			<p>The sample code in the instalment will iterate over the list below.</p>
				
			<ul id="jq_iter_demo">
				<li>First item in list</li>
				<li>Second thingy</li>
				<li>Last in the list</li>
			</ul>
		</section>
		<section class="col-12 col-md-6 col-lg-4">
			<div class="card">
				<h1 class="card-header  h4">Random Number Generator</h1>
				<div class="card-body">
					<form action="javascript:void(0);">
						<div class="form-group">
							<button class="btn btn-primary form-control" id="rng_btn">
								Generate Random Number
							</button>
						</div>
						<div class=form-group>
							<input type="text" class="form-control" id="rng_tb">
						</div>
					</form>
				</div>
			</div>
		</section>
	</div>
</main>

<!-- Include Bootstrap JavaScript from CDNs -->
<script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<!-- This Page's Local JavaScript Code -->
<script type="text/javascript">
	//
	// Define global variables for examples
	//
	
	// variable to store generator objects
	var myGeneratorObj = null;
	
	//
	// Document ready handler
	//
	$(function(){
		// create an infinite RNG generator object
		const rngObj = rng();
		
		// add a click handler to the randon number button
		$('#rng_btn').click(function(){
			$('#rng_tb').val(rngObj.next().value).select();
		});
	});
	
	//
	// Define functions for examples
	//
	
	// basic generator function
	function* basicGenerator(){
		yield 'first yielded value';
		yield 'second yielded value';
		return 'final returned value';
	}
	
	// basic random number generator
	function* basicRNG(n){
		while(n > 0){
			yield Math.random();
			n--;
		}
	}
	
	// better random number generator
	function* rng(n=0){
		if(n > 0){
			// generate a finite number of random numbers
			while(n > 0){
				yield Math.random();
				n--;
			}
		}else{
			// generate an infinite stram of random numbes
			while(true) yield Math.random();
		}
	}
	
	// an acumulator implemented with a generator function
	function* accumulator(initVal){
		// if an initial value was passed, store it
		// otherwise start at zero
		let balance = initVal ? initVal : 0;
		
		// keep updating the balance for ever
		while(true){
			// yield the current balance and accept an increment
			let incBy = yield balance;
			
			// if an increment was passed to next(), apply it
			if(incBy){
				balance += incBy;
			}
		}
	}
</script>

</body>
</html>